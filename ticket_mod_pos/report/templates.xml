<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!--
      Plantilla mínima que reutiliza el layout estándar pero fuerza estilos para ticket.
      No duplicamos toda la factura: dejamos que la plantilla nativa dibuje el contenido
      y limitamos el ancho/vista vía CSS y paperformat.
    -->
    <template id="report_invoice_ticket_layout_inherit" inherit_id="account.report_invoice_document">
        <xpath expr="//t[@t-name='account.report_invoice_document']" position="inside">
            <!-- Estilos específicos para formato ticket 80mm.
                 Se aplicarán solo cuando se imprima con nuestro reporte (paperformat 80mm). -->
            <t t-if="True">
                <style>
                    /* Limitar ancho visual pensando en 80mm + márgenes pequeños del paperformat */
                    .o_invoice_report {
                        max-width: 72mm; /* un pequeño margen dentro de los 80mm físicos */
                        margin: 0 auto !important;
                        font-size: 11px; /* un poco más compacto para ticket */
                        line-height: 1.25;
                    }
                    .o_invoice_report table {
                        width: 100% !important;
                        table-layout: fixed;
                    }
                    .o_invoice_report th, .o_invoice_report td {
                        padding: 2px 0 !important;
                        word-wrap: break-word;
                        overflow-wrap: anywhere;
                    }
                    /* Encabezados y totales más compactos */
                    .o_invoice_report h2, .o_invoice_report h3 {
                        margin: 2px 0 4px 0 !important;
                        font-size: 12px;
                    }
                    .o_invoice_summary, .o_invoice_line_taxes {
                        font-size: 10px;
                    }
                    /* Quitar grandes espacios verticales que vienen del estándar */
                    .mt32, .mt16, .mb32, .mb16 { margin: 6px 0 !important; }
                    .pt-3, .pb-3 { padding-top: 4px !important; padding-bottom: 4px !important; }
                    /* Cortes amigables para impresoras térmicas */
                    @media print {
                        html, body { margin: 0 !important; padding: 0 !important; }
                    }
                </style>
            </t>
        </xpath>
    </template>
</odoo>
