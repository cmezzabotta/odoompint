<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Formato de papel de 80 mm (térmico) -->
    <record id="paperformat_ticket_80mm" model="report.paperformat">
        <field name="name">Ticket 80mm</field>
        <field name="default" eval="False"/>
        <!-- Ancho y alto en milímetros. Altura alta para permitir páginas largas. -->
        <field name="page_height">0</field> <!-- 0 = altura dinámica (rollo) -->
        <field name="page_width">80</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">3</field>
        <field name="margin_bottom">3</field>
        <field name="margin_left">3</field>
        <field name="margin_right">3</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">0</field>
        <field name="dpi">90</field>
        <field name="report_type">qweb-pdf</field>
    </record>

    <!-- Reporte alternativo para factura en 80mm (reutiliza la plantilla estándar) -->
    <record id="action_report_invoice_ticket" model="ir.actions.report">
        <field name="name">Factura (Ticket 80mm)</field>
        <field name="model">account.move</field>
        <field name="report_type">qweb-pdf</field>
        <!-- Usamos la MISMA plantilla de factura nativa,
             pero con nuestros estilos heredados + paperformat estrecho -->
        <field name="report_name">account.report_invoice_document</field>
        <field name="report_file">account.report_invoice_document</field>
        <field name="paperformat_id" ref="ticket_mod_pos.paperformat_ticket_80mm"/>
        <field name="print_report_name">'INV_%s_TICKET' % (object.name or '')</field>
        <field name="binding_model_id" ref="account.model_account_move"/>
        <field name="binding_type">report</field>
        <field name="help">Imprime la factura en formato ticket térmico 80mm.</field>
    </record>
</odoo>
