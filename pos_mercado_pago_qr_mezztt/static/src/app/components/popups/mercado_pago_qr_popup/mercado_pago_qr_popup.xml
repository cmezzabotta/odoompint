<t t-name="pos_mercado_pago_qr_mezztt.MercadoPagoQrPopup" owl="1">
    <Dialog size="md" t-props="props">
        <t t-set-slot="title">
            <span class="o_mpqr_title">Mercado Pago â€¢ <t t-esc="props.orderName"/></span>
        </t>
        <div class="o_mpqr_body d-flex flex-column align-items-center">
            <div class="o_mpqr_amount h4 mb-2">
                <t t-esc="props.formattedAmount"/>
            </div>
            <div class="o_mpqr_qr mb-3">
                <t t-if="state.qrImage">
                    <img t-att-src="state.qrImage" alt="Mercado Pago QR" class="o_mpqr_qr_image"/>
                </t>
                <t t-else="">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </t>
            </div>
            <div class="o_mpqr_status text-center">
                <t t-if="state.status == 'pending'">
                    <span class="badge bg-info text-dark"> <t t-esc="env._t('Waiting for Mercado Pago confirmation...')"/> </span>
                </t>
                <t t-elif="state.status == 'approved'">
                    <span class="badge bg-success"> <t t-esc="env._t('Payment approved')"/> </span>
                </t>
                <t t-else="">
                    <span class="badge bg-danger"> <t t-esc="state.errorMessage or env._t('Payment cancelled')"/> </span>
                </t>
            </div>
            <div t-if="props.expiresAt" class="text-muted small mt-2">
                <t t-esc="(env._t('Expires at: %s') % props.expiresAt)"/>
            </div>
        </div>
        <t t-set-slot="footer">
            <div class="d-flex justify-content-between align-items-center w-100">
                <span class="text-muted small"> <t t-esc="env._t('Ask the customer to scan the QR with the Mercado Pago app.')"/> </span>
                <button type="button" class="btn btn-secondary" t-on-click="cancelPayment">
                    <i class="fa fa-times me-2"/> <t t-esc="env._t('Cancel')"/>
                </button>
            </div>
        </t>
    </Dialog>
</t>
